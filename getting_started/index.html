<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Getting started - SiriDB Enodo Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting started";
    var mkdocs_page_input_path = "getting_started.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> SiriDB Enodo Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Welcome to the SiriDB Enodo docs</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Getting started</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#deployment">Deployment</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#docker">Docker</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#localhost">Localhost</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#enodo-hub-api">Enodo Hub API</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#rest-api">REST API</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#socketio-api-websockets">Socket.IO Api (WebSockets)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#get-series">Get series</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#get-series-details">Get series Details</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#create-series">Create series</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#delete-series">Delete series</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#get-all-event-output-stream">Get all event output stream</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#create-event-output-stream">Create event output stream</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#delete-event-output-stream">Delete event output stream</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#analysis">Analysis</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-base-series-analysis">1. Base series analysis</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-forecasting">2. Forecasting</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-anomaly-detection">3. Anomaly detection</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-static-rules">4. Static rules</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#analysis-models">Analysis models</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">SiriDB Enodo Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Getting started</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="getting-started">Getting started</h1>
<h2 id="deployment">Deployment</h2>
<p>There are just a few strict rules to take into account when deploying the enodo platform. The Listener should be placed right next to you siridb instance, so it can listen to incoming data via a pipe. The worker can be deployed anywhere, as long as there is enough CPU resource to be used by the worker. The Hub should be deployed in such a way that it both the listener and the worker can connect to it via socket connections.</p>
<h3 id="docker">Docker</h3>
<p><strong>TODO</strong></p>
<h3 id="localhost">Localhost</h3>
<p>Follow these steps for all the Enodo components:</p>
<ol>
<li>Install dependencies via <code>pip3 install -r requirements.txt</code></li>
<li>Setup a .conf file file <code>python3 main.py --create_config</code> There will be made a <code>default.conf</code> next to the main.py.</li>
<li>Fill in the <code>default.conf</code> file</li>
<li>Call <code>python3 main.py --config=default.conf</code> to start the hub.</li>
<li>You can also setup the config by environment variables. These names are identical to those in the default.conf file, except all uppercase.</li>
</ol>
<p>Follow these additional steps for the Enodo Hub:</p>
<ol>
<li>Fill in <code>settings.enodo</code> file, which you can find in the data folder by the path set in the conf file with key: <code>enodo_base_save_path</code></li>
<li>Restart Hub to use new settings or fill them in via the GUI</li>
</ol>
<h2 id="enodo-hub-api">Enodo Hub API</h2>
<p>The Enodo Hub has two API's from which you can do CRUD actions and subscribe to data changes. A REST API and a socket.io API.</p>
<h3 id="rest-api">REST API</h3>
<table>
<thead>
<tr>
<th>Resource path</th>
<th align="center">CRUD</th>
</tr>
</thead>
<tbody>
<tr>
<td>/api/series</td>
<td align="center">CR</td>
</tr>
<tr>
<td>/api/series/{series_name}</td>
<td align="center">RD</td>
</tr>
<tr>
<td>/api/enodo/event/output</td>
<td align="center">CR</td>
</tr>
<tr>
<td>api/enodo/event/output/{output_id}</td>
<td align="center">D</td>
</tr>
</tbody>
</table>
<h4 id="examples">Examples</h4>
<p><strong>Create Series</strong></p>
<p>call <code>{hostname}/api/series</code> (POST)</p>
<pre><code>{
    &quot;name&quot;: &quot;series_name_in_siridb&quot;,
    &quot;config&quot;: {
        &quot;min_data_points&quot;:2,
        &quot;job_config&quot;:{
            &quot;job_base_analysis&quot;: {
                &quot;activated&quot;: true,
                &quot;model&quot;: &quot;prophet&quot;,
                &quot;job_schedule&quot;: 200,
                &quot;model_params&quot;:{
                    &quot;points_since&quot;:1563723900,
                    &quot;sensitivity&quot;:2,
                    &quot;static_rules&quot;:{
                    &quot;min&quot;:800,
                    &quot;max&quot;:1000,
                    &quot;last_n_points&quot;:100
                    }
                }
            },
            &quot;job_forecast&quot;: {
                &quot;activated&quot;: true,
                &quot;model&quot;: &quot;ffe&quot;,
                &quot;job_schedule&quot;: 200,
                &quot;model_params&quot;:{
                    &quot;points_since&quot;:1563723900,
                    &quot;sensitivity&quot;:2,
                    &quot;static_rules&quot;:{
                    &quot;min&quot;:800,
                    &quot;max&quot;:1000,
                    &quot;last_n_points&quot;:100
                    }
                }
            }
        }
    }
}
</code></pre>
<p><strong>Create event output stream</strong></p>
<p>call <code>{hostname}/api/enodo/event/output</code> (POST)</p>
<pre><code>{
    &quot;output_type&quot;: 1,
    &quot;data&quot;: {
        &quot;for_severities&quot;: [&quot;warning&quot;, &quot;error&quot;],
        &quot;url&quot;: &quot;url_to_endpoint&quot;,
        &quot;headers&quot;: {
            &quot;authorization&quot;: &quot;Basic abcdefghijklmnopqrstuvwxyz&quot;
        },
        &quot;payload&quot;: &quot;{\n  \&quot;title\&quot;: \&quot;{{event.title}}\&quot;,\n  \&quot;body\&quot;: \&quot;{{event.message}}\&quot;,\n  \&quot;dateTime\&quot;: {{event.ts}},\n  \&quot;severity\&quot;: \&quot;{{event.severity}}\&quot;\n}&quot;
    }
}
</code></pre>
<h3 id="socketio-api-websockets">Socket.IO Api (WebSockets)</h3>
<p>When sending payload in a request, use the data structure same as in the REST API calls, except the data will be wrapped in an object : <code>{"data": ...}</code>.</p>
<h4 id="get-series">Get series</h4>
<p>event: <code>/api/series/create</code></p>
<h4 id="get-series-details">Get series Details</h4>
<p>event: <code>/api/series/details</code></p>
<h4 id="create-series">Create series</h4>
<p>event: <code>/api/series/create</code></p>
<h4 id="delete-series">Delete series</h4>
<p>event: <code>/api/series/delete</code></p>
<h4 id="get-all-event-output-stream">Get all event output stream</h4>
<p>event: <code>/api/event/output</code></p>
<h4 id="create-event-output-stream">Create event output stream</h4>
<p>event: <code>/api/event/output/create</code></p>
<h4 id="delete-event-output-stream">Delete event output stream</h4>
<p>event: <code>/api/event/output/delete</code></p>
<h2 id="analysis">Analysis</h2>
<p>Enodo support the following analysis jobs:</p>
<ol>
<li>Base series analysis for series characteristics</li>
<li>Forecasting</li>
<li>Anomaly detection</li>
<li>Statis rules</li>
</ol>
<p>Each analysis job is send by the Hub to a available worker. The worker uses the series config to determine which model/algorithm to use for executing the job. Different workers can have different models implemented, which they let the Hub know while connecting on startup.</p>
<h3 id="1-base-series-analysis">1. Base series analysis</h3>
<p>This job is meant to gather series characteristics and simple data such as if the series has a trend of detectable seasonality in it.</p>
<h3 id="2-forecasting">2. Forecasting</h3>
<p>The forecasting job results in a forecast of the series. The worker will use a requested model to forecast the series into the future, using the data we already have of this series. The forecast can differ between models and config. You can forecast just 5 hours into the future, or 5 days and so one. Depending on the amount of data and the model used for this job, it can be a very extensive or simple forecast.</p>
<h3 id="3-anomaly-detection">3. Anomaly detection</h3>
<p>Using a requested model/algorithm the worker will try to check if in the last <em>n</em> points, there were any anomalies within the data. The more suffisticated the model or algorithm, the more precise the worker can be.</p>
<h3 id="4-static-rules">4. Static rules</h3>
<p>For simple series, a static threshold will do. For now Enodo support a min and max threshold.</p>
<h3 id="analysis-models">Analysis models</h3>
<p>Models can be installed within the worker</p>
<pre><code>analyser
├── model
    ├── __init__.py
    ├── models
    │   ├── base.py
    │   ├── ffe
    │   │   ├── __init__.py
    │   │   ├── bootstrap.py
    │   │   └── ffe.py
    │   └── prophet
    │       ├── __init__.py
    │       ├── bootstrap.py
    │       └── prophet.py
    └── util.py
</code></pre>
<p>Within the model folder you will find:</p>
<ul>
<li>util.py holding the load function, to load all model classes</li>
<li>models folder holding all installed analyser models</li>
</ul>
<p>When creating a new model, make sure that the modelclass itself extends the basemodel class in base.py, and that the bootstrap.py file will have a function <code>get_model_class</code> which will return the model class itself (not an instance)</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href=".." class="btn btn-neutral" title="Welcome to the SiriDB Enodo docs"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
