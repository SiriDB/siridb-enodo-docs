<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.90.0">
<meta name=description content="Enodo documentation">
<link rel="shortcut icon" href=/v0/images/favicon.ico type=image/x-icon>
<title>Getting started :: Enodo documentation</title>
<link href=/v0/css/nucleus.css?1669302237 rel=stylesheet>
<link href=/v0/css/fontawesome-all.min.css?1669302237 rel=stylesheet>
<link href=/v0/css/hybrid.css?1669302237 rel=stylesheet>
<link href=/v0/css/featherlight.min.css?1669302237 rel=stylesheet>
<link href=/v0/css/perfect-scrollbar.min.css?1669302237 rel=stylesheet>
<link href=/v0/css/auto-complete.css?1669302237 rel=stylesheet>
<link href=/v0/css/atom-one-dark-reasonable.css?1669302237 rel=stylesheet>
<link href=/v0/css/theme.css?1669302237 rel=stylesheet>
<link href=/v0/css/hugo-theme.css?1669302237 rel=stylesheet>
<link href=/v0/css/theme-mine.css?1669302237 rel=stylesheet>
<script src=/v0/js/jquery-3.3.1.min.js?1669302237></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style>
</head>
<body data-url=/v0/getting_started/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a href=/>
<img src=/v0/images/logo.png alt=Logo>
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/v0/js/lunr.min.js?1669302237></script>
<script type=text/javascript src=/v0/js/auto-complete.js?1669302237></script>
<script type=text/javascript>var baseurl="https://docs.siridb-enodo.com/v0/"</script>
<script type=text/javascript src=/v0/js/search.js?1669302237></script>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/v0/getting_started/ title="Getting started" class="dd-item
parent
active">
<a href=/v0/getting_started/>
Getting started
</a>
</li>
</ul>
<section id=shortcuts>
<h3>More</h3>
<ul>
<li>
<a class=padding href=https://siridb.net/enodo><i class="far fa-window-maximize"></i> Website</a>
</li>
<li>
<a class=padding href=https://github.com/SiriDB/siridb-enodo-hub><i class="fab fa-github"></i> Github repo</a>
</li>
</ul>
</section>
<section id=footer>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<ol class=links itemscope itemtype=http://schema.org/BreadcrumbList>
<meta itemprop=itemListOrder content="Descending">
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement>
<meta itemprop=position content="2">
<a itemprop=item href=/v0/>
<span itemprop=name></span>
</a>
</li>
>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement>
<meta itemprop=position content="1">
<a itemprop=item href=/v0/getting_started/ aria-disabled=true>
<span itemprop=name>Getting started</span>
</a>
</li>
</ol>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#worker-pools>Worker pools</a></li>
<li><a href=#enodo-internal-vocabulary>Enodo internal vocabulary</a></li>
</ul>
<ul>
<li><a href=#run-job-for-series>Run job for series</a></li>
<li><a href=#get-outputs-for-events>Get Outputs for events</a></li>
<li><a href=#get-outputs-for-results>Get outputs for results</a></li>
<li><a href=#delete-an-output>Delete an output</a></li>
<li><a href=#add-output>Add output</a></li>
<li><a href=#get-worker-stats>Get worker stats</a></li>
<li><a href=#get-worker-state-for-a-series>Get worker state for a series</a></li>
<li><a href=#get-workers>Get workers</a></li>
<li><a href=#delete-worker>Delete worker</a></li>
<li><a href=#add-worker>Add worker</a></li>
<li><a href=#get-hub-status>Get hub status</a></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<div id=body-inner>
<h1>
Getting started
</h1>
<h2 id=worker-pools>Worker pools</h2>
<p>The hub divides workers into pools. Within a pool, workers are also divided by their <code>job_type_id</code>. So when running a job, the hub needs to know in which pool and for which job type. For each combination of <code>pool_id</code> and <code>job_type_id</code> a lookup/scaling table is generated based on the number of workers available for that combination.</p>
<h2 id=enodo-internal-vocabulary>Enodo internal vocabulary</h2>
<ul>
<li><code>pool_id</code>: the index of a pool (0,1,2&mldr;.)</li>
<li><code>job_type_id</code>: the id that corresponds with a job type (forecast, anomaly detection..)</li>
<li><code>pool_idx</code>: the bitshifted combination between pool_id and job_type_id (see <code>gen_pool_idx</code> func in hub)</li>
<li><code>worker_id</code>: the index of a worker within a pool/job_type combo</li>
<li><code>worker_idx</code>: the bitshifted combination between pool_id, job_type_id and worker_id. (see <code>gen_worker_idx</code> func in hub) Makes it easy to use one int value for a quick lookup of a certain worker. Also you are able to determine the pool_id and job_type_id from this idx</li>
</ul>
<h1 id=rest-api>REST API</h1>
<p>Auth is basic auth. Default username and password are <code>enodo</code></p>
<h2 id=run-job-for-series>Run job for series</h2>
<p>You can request enodo to run a job. You can give an output id (<code>responseOutputID</code>) which will be used to send the result to</p>
<pre tabindex=0><code>curl --request POST \
  --url 'http://localhost/api/series/forecast_test2/run?byName=1&amp;poolID=0&amp;responseOutputID=1017' \
  --header 'Authorization: Basic qweqweqw=' \
  --header 'Content-Type: application/json' \
  --data '{
	&quot;meta&quot;: {
		&quot;assetID&quot;: &quot;1234abcd&quot;
	},
	&quot;config&quot;: {
		&quot;config_name&quot;: &quot;forecast&quot;,
		&quot;job_type_id&quot;: 1,
		&quot;module&quot;: &quot;prophet@0.2.0-beta0.1.2&quot;,
		&quot;max_n_points&quot;: 20000,
		&quot;module_params&quot;: {
			&quot;periods&quot;: 200,
			&quot;smooth&quot;: true,
			&quot;forecast_freq&quot;: &quot;30T&quot;,
			&quot;changepoint_range&quot;: 0.95,
			&quot;uncertainty_samples&quot;: 1000
		}
	}
}'
</code></pre><ul>
<li><code>job_type_id</code> is the job type, <code>1</code> equals a forecast job.</li>
<li><code>max_n_points</code> is the amount of historic points we will use to create our model</li>
</ul>
<p>In model params:</p>
<ul>
<li><code>periods</code> is the amount of periods the forecast needs to be. So the range of the forecast will be <code>periods * forecast_freq</code></li>
<li><code>smooth</code> determines if we apply smoothing to our historic data. When applied, we will reduce the time needed to fit our model</li>
<li><code>changepoint_range</code> will determin how much of our historic data is used to determine changepoints. When we have a small dataset, it is important that this value is as high as possible (range: 0.0 - 1.0)</li>
<li><code>uncertainty_samples</code> Will determine the precision of our <code>yhat_lower</code> and <code>yhat_upper</code> (0 - 1000) the more closer to 1000 the more accurate it will be, but this adds a bit of extra time to our fitting)</li>
</ul>
<h2 id=get-outputs-for-events>Get Outputs for events</h2>
<p>Get active outputs for events</p>
<pre tabindex=0><code>curl --request GET \
  --url http://localhost/api/enodo/output/event \
  --header 'Authorization: Basic qweqweqw='
</code></pre><h2 id=get-outputs-for-results>Get outputs for results</h2>
<p>Get active output for results</p>
<pre tabindex=0><code>curl --request GET \
  --url http://localhost/api/enodo/output/result \
  --header 'Authorization: Basic qweqweqw='
</code></pre><h2 id=delete-an-output>Delete an output</h2>
<p>Delete an output by its type (event or result) and id</p>
<pre tabindex=0><code>curl --request DELETE \
  --url http://localhost/api/enodo/output/{type}/{id} \
  --header 'Authorization: Basic qweqweqw='
</code></pre><h2 id=add-output>Add output</h2>
<p>Add an event or result output</p>
<pre tabindex=0><code>curl --request POST \
  --url http://localhost/api/enodo/output/result \
  --header 'Authorization: Basic qweqweqw=' \
  --header 'Content-Type: application/json' \
  --data '{
	&quot;url&quot;: &quot;http://hub:8720/enodo&quot;,
	&quot;params&quot;: {
		&quot;assetId&quot;: &quot;${request.meta.assetId}&quot;
	},
	&quot;headers&quot;: {
		&quot;Authorization&quot;: &quot;Basic 2312&quot;,
		&quot;Content-Type&quot;: &quot;application/json&quot;
	},
	&quot;payload&quot;: &quot;{${?response.error,error}${?response.meta.accuracy,accuracy}\&quot;forecast\&quot;: ${response.result},\&quot;name\&quot;: \&quot;${response.series_name}\&quot;}&quot;
}'
</code></pre><p>The params and payload fields can have string templating syntax in them, but also added extra&rsquo;s such as <code>?</code> for optionals and <code>{original_path, new_property_name}</code></p>
<h2 id=get-worker-stats>Get worker stats</h2>
<p>Get stats about workers in a pool</p>
<pre tabindex=0><code>curl --request GET \
  --url http://localhost/api/worker/stats/{pool_id} \
  --header 'Authorization: Basic qweqweqw='
</code></pre><h2 id=get-worker-state-for-a-series>Get worker state for a series</h2>
<p>Query the responsible worker for the current state the worker has for a specified series</p>
<pre tabindex=0><code>curl --request GET \
  --url http://localhost/api/series/{series_name}/state/{pool_id}/{job_type_id} \
  --header 'Authorization: Basic qweqweqw='
</code></pre><h2 id=get-workers>Get workers</h2>
<p>Get works the hub knowns</p>
<pre tabindex=0><code>curl --request GET \
  --url http://localhost/api/worker/{pool_id} \
  --header 'Authorization: Basic qweqweqw='
</code></pre><h2 id=delete-worker>Delete worker</h2>
<p>Delete a worker. The hub will always delete the latest worker in the given pool/job_type combo.</p>
<pre tabindex=0><code>curl --request DELETE \
  --url http://localhost/api/worker/{pool_id}/{job_type_id} \
  --header 'Authorization: Basic qweqweqw=' \
</code></pre><h2 id=add-worker>Add worker</h2>
<p>Add a worker to a given <code>pool_id</code> for a given <code>job_type_id</code></p>
<pre tabindex=0><code>curl --request POST \
  --url http://localhost/api/worker/{pool_id} \
  --header 'Authorization: Basic qweqweqw=' \
  --header 'Content-Type: application/json' \
  --data '{
	&quot;hostname&quot;: &quot;localhost&quot;,
	&quot;port&quot;: 9105,
	&quot;worker_config&quot;: {
		&quot;job_type_id&quot;: 1,
		&quot;config&quot;: {}
	}
}'
</code></pre><h2 id=get-hub-status>Get hub status</h2>
<p>Get hub version</p>
<pre tabindex=0><code>curl --request GET \
  --url http://localhost:8081/api/enodo/status \
  --header 'Authorization: Basic qweqweqw='
</code></pre>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/v0/categories/ title=Categories> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/v0/tags/ title=Tags style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/v0/js/clipboard.min.js?1669302237></script>
<script src=/v0/js/perfect-scrollbar.min.js?1669302237></script>
<script src=/v0/js/perfect-scrollbar.jquery.min.js?1669302237></script>
<script src=/v0/js/jquery.sticky.js?1669302237></script>
<script src=/v0/js/featherlight.min.js?1669302237></script>
<script src=/v0/js/highlight.pack.js?1669302237></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/v0/js/modernizr.custom-3.6.0.js?1669302237></script>
<script src=/v0/js/learn.js?1669302237></script>
<script src=/v0/js/hugo-learn.js?1669302237></script>
<link href=/v0/mermaid/mermaid.css?1669302237 rel=stylesheet>
<script src=/v0/mermaid/mermaid.js?1669302237></script>
<script>mermaid.initialize({startOnLoad:!0})</script>
</body>
</html>